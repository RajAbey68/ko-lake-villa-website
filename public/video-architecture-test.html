<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Video Architecture Test - Ko Lake Villa</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .video-card {
            position: relative;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid #ddd;
        }
        .video-card video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .video-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.3);
        }
        .play-button {
            background: rgba(0,0,0,0.7);
            border-radius: 50%;
            padding: 20px;
            color: white;
            font-size: 24px;
        }
        .video-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255,255,255,0.9);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        .warning { background: #fff3cd; color: #856404; }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
        }
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            max-width: 90vw;
            max-height: 90vh;
            position: relative;
        }
        .modal video {
            width: 100%;
            height: auto;
            max-height: 80vh;
        }
        .close-btn {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 28px;
            cursor: pointer;
            background: rgba(0,0,0,0.5);
            padding: 5px 10px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Ko Lake Villa - Video Architecture Test</h1>
        <p><strong>Testing the exact same video implementation as React gallery</strong></p>
        
        <!-- Architecture Analysis -->
        <div class="test-section">
            <h2>üìä Architecture Analysis Results</h2>
            <div id="analysis-results">
                <div class="status info">
                    <strong>Layer 1 - File System:</strong> ‚úÖ 8 video files found (51MB, 24MB, 13MB sizes)
                </div>
                <div class="status info">
                    <strong>Layer 2 - HTTP Server:</strong> ‚úÖ All videos return HTTP 200, proper headers
                </div>
                <div class="status info">
                    <strong>Layer 3 - React Component:</strong> ‚úÖ Videos properly referenced in static data
                </div>
                <div class="status warning">
                    <strong>Layer 4 - UI Rendering:</strong> üîç Testing video HTML rendering...
                </div>
                <div class="status warning">
                    <strong>Layer 5 - Component Tree:</strong> üîç Testing Dialog/Modal components...
                </div>
                <div class="status warning">
                    <strong>Layer 6 - JavaScript:</strong> üîç Testing click interactions...
                </div>
            </div>
        </div>

        <!-- Gallery Grid Test (Same as React) -->
        <div class="test-section">
            <h2>üé• Gallery Grid Test (Mimics React Implementation)</h2>
            <p>Testing the exact same video rendering as in app/gallery/page.tsx</p>
            
            <div class="video-grid" id="video-grid">
                <!-- Videos will be populated by JavaScript -->
            </div>
        </div>

        <!-- Modal Test -->
        <div class="test-section">
            <h2>üñºÔ∏è Lightbox Modal Test</h2>
            <p>Testing the Dialog/modal functionality</p>
            <button onclick="testModal()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                Test Modal Functionality
            </button>
        </div>

        <!-- Debug Info -->
        <div class="test-section">
            <h2>üêõ Debug Information</h2>
            <div id="debug-info">
                <p><strong>User Agent:</strong> <span id="user-agent"></span></p>
                <p><strong>Browser:</strong> <span id="browser-info"></span></p>
                <p><strong>Video Support:</strong> <span id="video-support"></span></p>
                <p><strong>JavaScript Enabled:</strong> ‚úÖ Yes (this page wouldn't work otherwise)</p>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="video-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <video id="modal-video" controls></video>
        </div>
    </div>

    <script>
        // Video data - exact same as React gallery
        const videos = [
            {
                url: "/uploads/gallery/default/1747446463517-373816080-20250420_164235.mp4",
                title: "Complete Villa Walkthrough Tour",
                description: "Comprehensive tour showcasing all villa spaces and amenities"
            },
            {
                url: "/uploads/gallery/default/1747367220545-41420806-20250420_170745.mp4", 
                title: "Lake View Experience",
                description: "Beautiful views of Koggala Lake from the villa"
            },
            {
                url: "/uploads/gallery/default/1747345835546-656953027-20250420_170537.mp4",
                title: "Sunset Over Lake", 
                description: "Stunning sunset views from Ko Lake Villa"
            }
        ];

        // Populate debug info
        document.getElementById('user-agent').textContent = navigator.userAgent;
        document.getElementById('browser-info').textContent = getBrowserInfo();
        document.getElementById('video-support').textContent = checkVideoSupport();

        // Create video grid
        function createVideoGrid() {
            const grid = document.getElementById('video-grid');
            
            videos.forEach((video, index) => {
                const card = document.createElement('div');
                card.className = 'video-card';
                card.onclick = () => openVideo(video.url, video.title);
                
                card.innerHTML = `
                    <video 
                        src="${video.url}"
                        preload="metadata"
                        muted
                        onloadstart="console.log('Video loading started: ${video.title}')"
                        oncanplay="console.log('Video can play: ${video.title}')"
                        onerror="console.error('Video error: ${video.title}'); this.style.display='none'"
                        poster="/placeholder.svg?height=400&width=600&text=Loading+Video...">
                    </video>
                    <div class="video-badge">üìπ video</div>
                    <div class="video-overlay">
                        <div class="play-button">‚ñ∂Ô∏è</div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // Open video in modal (same as React Dialog)
        function openVideo(url, title) {
            const modal = document.getElementById('video-modal');
            const video = document.getElementById('modal-video');
            
            video.src = url;
            video.poster = "/placeholder.svg?height=400&width=600&text=Loading+Video...";
            
            modal.classList.add('show');
            
            video.onloadstart = () => {
                console.log(`Modal video loading: ${title}`);
                updateStatus('info', `Loading video: ${title}`);
            };
            
            video.oncanplay = () => {
                console.log(`Modal video ready: ${title}`);
                updateStatus('success', `‚úÖ Video ready: ${title}`);
                video.play();
            };
            
            video.onerror = (e) => {
                console.error(`Modal video error: ${title}`, e);
                updateStatus('error', `‚ùå Video failed: ${title}`);
            };
        }

        // Close modal
        function closeModal() {
            const modal = document.getElementById('video-modal');
            const video = document.getElementById('modal-video');
            
            modal.classList.remove('show');
            video.pause();
            video.src = '';
        }

        // Test modal functionality
        function testModal() {
            openVideo(videos[0].url, videos[0].title);
        }

        // Utility functions
        function getBrowserInfo() {
            const ua = navigator.userAgent;
            if (ua.includes('Chrome')) return 'Chrome';
            if (ua.includes('Firefox')) return 'Firefox';
            if (ua.includes('Safari')) return 'Safari';
            if (ua.includes('Edge')) return 'Edge';
            return 'Unknown';
        }

        function checkVideoSupport() {
            const video = document.createElement('video');
            const mp4 = video.canPlayType('video/mp4');
            return mp4 ? `‚úÖ MP4 supported (${mp4})` : '‚ùå MP4 not supported';
        }

        function updateStatus(type, message) {
            const analysisResults = document.getElementById('analysis-results');
            const statusDiv = document.createElement('div');
            statusDiv.className = `status ${type}`;
            statusDiv.innerHTML = `<strong>Runtime:</strong> ${message}`;
            analysisResults.appendChild(statusDiv);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            createVideoGrid();
            updateStatus('info', 'Video grid created with 3 videos');
        });

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('video-modal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html> 